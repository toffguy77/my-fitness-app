# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –ø—Ä–æ–µ–∫—Ç–∞ My Fitness App.

---

## üìä –¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–∫—Ä—ã—Ç–∏—è:
```bash
npm run test:coverage
```

**–¶–µ–ª—å:** 80%+ –ø–æ–∫—Ä—ã—Ç–∏–µ –∫—Ä–∏—Ç–∏—á–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

---

## üß™ –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

### 1. Unit Tests (Jest)

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, —É—Ç–∏–ª–∏—Ç, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/**/__tests__/*.test.{ts,tsx}`

**–ü—Ä–∏–º–µ—Ä—ã:**
- `src/utils/__tests__/logger.test.ts`
- `src/components/__tests__/DayToggle.test.tsx`

**–ó–∞–ø—É—Å–∫:**
```bash
npm test
npm test -- --watch
```

---

### 2. Functional Tests (Jest + Testing Library)

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ —Å—Ç—Ä–∞–Ω–∏—Ü.

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/**/__tests__/*.test.tsx`

**–ü—Ä–∏–º–µ—Ä—ã:**
- `src/components/__tests__/Paywall.test.tsx`
- `src/components/__tests__/ClientDashboardView.test.tsx`

---

### 3. Integration Tests (Jest)

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ —Å–µ—Ä–≤–∏—Å–æ–≤.

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/__tests__/integration.test.ts`

**–ü—Ä–∏–º–µ—Ä—ã:**
- –ü—Ä–æ—Ñ–∏–ª—å –∏ –ø–æ–¥–ø–∏—Å–∫–∞
- –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –æ –ø–∏—Ç–∞–Ω–∏–∏
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º
- –†–∞—Å—á–µ—Ç —Å—Ç–∞—Ç—É—Å–æ–≤

---

### 4. Business Logic Tests (Jest)

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª –∏ —Ä–∞—Å—á–µ—Ç–æ–≤.

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/app/**/__tests__/*.business.test.ts`

**–ü—Ä–∏–º–µ—Ä—ã:**
- `src/app/app/dashboard/__tests__/dashboard.business.test.ts`
- `src/app/app/nutrition/__tests__/nutrition.business.test.ts`
- `src/app/app/coach/__tests__/coach.business.test.ts`

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è:**
- –†–∞—Å—á–µ—Ç—ã –ö–ë–ñ–£
- –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –õ–æ–≥–∏–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ (Traffic Light System)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

---

### 5. E2E Tests (Playwright)

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `e2e/*.spec.ts`

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**
- `e2e/auth.spec.ts` ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `e2e/onboarding.spec.ts` ‚Äî –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `e2e/nutrition.spec.ts` ‚Äî –≤–≤–æ–¥ –ø–∏—Ç–∞–Ω–∏—è
- `e2e/dashboard.spec.ts` ‚Äî –¥–∞—à–±–æ—Ä–¥ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- `e2e/coach.spec.ts` ‚Äî —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ç—Ä–µ–Ω–µ—Ä–∞
- `e2e/performance.spec.ts` ‚Äî —Ç–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–ó–∞–ø—É—Å–∫:**
```bash
npm run test:e2e           # –í—Å–µ E2E —Ç–µ—Å—Ç—ã
npm run test:e2e:ui         # –° UI —Ä–µ–∂–∏–º–æ–º
npm run test:e2e:debug     # Debug —Ä–µ–∂–∏–º
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ó–∞–ø—É—â–µ–Ω–Ω—ã–π dev —Å–µ—Ä–≤–µ—Ä (`npm run dev`)
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

---

### 6. Performance Tests (Playwright)

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –º–µ—Ç—Ä–∏–∫.

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `e2e/performance.spec.ts`

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è:**
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü
- Web Vitals –º–µ—Ç—Ä–∏–∫–∏
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å API
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏

---

## üìù –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

### Unit Test

```typescript
// src/utils/__tests__/newUtil.test.ts
import { newUtil } from '../newUtil'

describe('newUtil', () => {
  it('should work correctly', () => {
    expect(newUtil()).toBe(expected)
  })
})
```

### Component Test

```typescript
// src/components/__tests__/NewComponent.test.tsx
import { render, screen } from '@testing-library/react'
import NewComponent from '../NewComponent'

describe('NewComponent', () => {
  it('should render correctly', () => {
    render(<NewComponent />)
    expect(screen.getByText('Expected Text')).toBeInTheDocument()
  })
})
```

### E2E Test

```typescript
// e2e/new-feature.spec.ts
import { test, expect } from '@playwright/test'

test.describe('New Feature', () => {
  test('should work end-to-end', async ({ page }) => {
    await page.goto('/new-feature')
    await expect(page.locator('text=Feature')).toBeVisible()
  })
})
```

---

## üéØ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è E2E

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥**
   - –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è
   - –ü—Ä–æ—Ö–æ–¥–∏—Ç –æ–Ω–±–æ—Ä–¥–∏–Ω–≥
   - –ü–æ–ª—É—á–∞–µ—Ç —Ü–µ–ª–∏ –ø–∏—Ç–∞–Ω–∏—è

2. **–í–≤–æ–¥ –ø–∏—Ç–∞–Ω–∏—è**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–∏–µ–º—ã –ø–∏—â–∏
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–Ω–µ–≤–Ω–æ–π –ª–æ–≥
   - –í–∏–¥–∏—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ

3. **Daily Check-in**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç –¥–µ–Ω—å
   - –î–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   - –¢—Ä–µ–Ω–µ—Ä –≤–∏–¥–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å

4. **Coach Feedback**
   - –¢—Ä–µ–Ω–µ—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–º–µ—Ç–∫—É –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞
   - –ö–ª–∏–µ–Ω—Ç –≤–∏–¥–∏—Ç –∑–∞–º–µ—Ç–∫—É –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ

5. **–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ä–æ–ª—è–º**
   - –ö–ª–∏–µ–Ω—Ç –≤–∏–¥–∏—Ç —Å–≤–æ–π –¥–∞—à–±–æ—Ä–¥
   - –¢—Ä–µ–Ω–µ—Ä –≤–∏–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤
   - –ê–¥–º–∏–Ω –≤–∏–¥–∏—Ç –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### Jest (Unit/Integration)

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: `jest.config.js`

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `jest-environment-jsdom` –¥–ª—è React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ TypeScript —á–µ—Ä–µ–∑ `ts-jest`
- –ú–æ–∫–∏ –¥–ª—è Supabase —á–µ—Ä–µ–∑ MSW

### Playwright (E2E)

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: `playwright.config.ts`

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Chromium, Firefox, WebKit
- HTML –æ—Ç—á–µ—Ç—ã –∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

E2E —Ç–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç:
- **TTI (Time to Interactive):** < 2s –¥–ª—è landing page
- **Load Time:** < 3s –¥–ª—è dashboard
- **API Response Time:** < 500ms —Å—Ä–µ–¥–Ω–µ–µ
- **Memory Usage:** < 50MB –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

---

## üöÄ CI/CD

–í CI/CD –æ–∫—Ä—É–∂–µ–Ω–∏–∏:
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±—Ä–∞—É–∑–µ—Ä—ã: `npx playwright install --with-deps`
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `CI=true` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –¢–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å retries

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Jest Documentation](https://jestjs.io/)
- [Testing Library](https://testing-library.com/)
- [Playwright Documentation](https://playwright.dev/)
- [E2E Tests README](./e2e/README.md)

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-01-XX

