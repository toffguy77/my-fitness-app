# CI/CD Reports

This directory contains automated reports generated by the CI/CD pipeline.

## Report Types

### Weekly Reports

Weekly reports are automatically generated every Monday at 9:00 AM UTC and include:

- **Pipeline Performance Metrics**
  - Success/failure rates
  - Average build times
  - Workflow breakdown
  - Daily activity trends

- **Pull Request Analytics**
  - Merge rates and timing
  - PR size distribution
  - Top contributors
  - Review process metrics

- **Quality Metrics**
  - Code coverage trends
  - Security scan results
  - Quality gate performance

- **Recommendations**
  - Performance optimization suggestions
  - Process improvement recommendations
  - Best practice guidance

## File Naming Convention

- `weekly-report-YYYY-MM-DD.md` - Human-readable markdown reports
- `weekly-data-YYYY-MM-DD.json` - Machine-readable data for analysis

## Accessing Reports

### GitHub Issues
Each weekly report automatically creates a GitHub issue with a summary and links to the full report.

### Telegram Notifications
If configured, reports are automatically sent to the configured Telegram chat.

### Artifacts
Reports are also uploaded as GitHub Actions artifacts with 90-day retention.

## Manual Report Generation

You can manually trigger report generation using the GitHub Actions workflow:

1. Go to the Actions tab in your repository
2. Select "Weekly CI/CD Report" workflow
3. Click "Run workflow"
4. Optionally configure:
   - Whether to send Telegram notification
   - Number of days to look back (default: 7)

## Configuration

### Required Secrets

For full functionality, configure these repository secrets:

- `TELEGRAM_BOT_TOKEN` - Telegram bot token for notifications
- `TELEGRAM_CHAT_ID` - Telegram chat ID for notifications

### Permissions

The workflow requires these permissions:
- `contents: write` - To commit reports to repository
- `actions: read` - To read workflow run data
- `pull-requests: read` - To analyze PR metrics

## Report Analysis

### Success Rate Thresholds
- ðŸŸ¢ **Excellent**: â‰¥95% success rate
- ðŸŸ¡ **Good**: 85-94% success rate
- ðŸ”´ **Needs Attention**: <85% success rate

### Build Time Thresholds
- ðŸŸ¢ **Fast**: <10 minutes average
- ðŸŸ¡ **Acceptable**: 10-15 minutes average
- ðŸ”´ **Slow**: >15 minutes average

### PR Merge Time Thresholds
- ðŸŸ¢ **Fast**: <1 day average
- ðŸŸ¡ **Acceptable**: 1-3 days average
- ðŸ”´ **Slow**: >3 days average

## Troubleshooting

### Report Generation Fails

1. Check workflow logs in GitHub Actions
2. Verify repository permissions
3. Ensure GitHub token has required scopes
4. Check for API rate limiting

### Missing Data

- Workflow runs: Ensure workflows have run in the past week
- PR data: Verify repository has pull request activity
- Coverage data: Check that coverage reports are being generated

### Telegram Notifications Not Working

1. Verify `TELEGRAM_BOT_TOKEN` is correct
2. Ensure `TELEGRAM_CHAT_ID` is valid
3. Check that bot has permission to send messages to the chat
4. Verify bot token hasn't expired

## Customization

### Modifying Report Content

Edit `scripts/weekly-report.js` to customize:
- Report sections and metrics
- Analysis thresholds
- Formatting and styling
- Additional data sources

### Changing Schedule

Modify the cron expression in `.github/workflows/weekly-report.yml`:
```yaml
schedule:
  - cron: '0 9 * * 1'  # Every Monday at 9 AM UTC
```

### Adding New Metrics

1. Extend the data collection methods in `WeeklyReportGenerator`
2. Add analysis logic for new metrics
3. Update the report formatting to include new sections
4. Test with manual workflow trigger

## Data Retention

- **Markdown Reports**: Stored permanently in repository
- **JSON Data**: Stored permanently in repository
- **GitHub Issues**: Managed according to repository settings
- **Artifacts**: 90-day retention (configurable)
- **Telegram Messages**: Managed by Telegram retention settings

## Privacy and Security

- Reports contain only aggregated metrics, no sensitive data
- All API calls use read-only permissions where possible
- Telegram notifications are optional and can be disabled
- Reports are stored in the same repository, following existing access controls
