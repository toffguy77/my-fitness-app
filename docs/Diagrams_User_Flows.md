# Диаграммы пользовательских потоков My Fitness App

**Версия документа:** 1.0  
**Дата создания:** Январь 2025  
**Статус:** Актуальная реализация v4.0+

---

## Полный user journey для клиента (Free)

```mermaid
journey
    title User Journey: Free Client
    section Регистрация
      Открывает лендинг: 5: Пользователь
      Читает информацию: 4: Пользователь
      Нажимает "Начать бесплатно": 5: Пользователь
      Регистрируется: 4: Пользователь
      Проходит онбординг: 3: Пользователь
    section Онбординг
      Вводит биометрию: 4: Пользователь
      Выбирает активность: 4: Пользователь
      Выбирает цель: 5: Пользователь
      Система рассчитывает цели: 5: Система
    section Использование
      Открывает дашборд: 5: Пользователь
      Вводит данные о питании: 4: Пользователь
      Сохраняет данные: 5: Пользователь
      Видит прогресс: 5: Пользователь
      Завершает день: 4: Пользователь
    section Ограничения
      Пытается открыть отчеты: 2: Пользователь
      Видит Paywall: 3: Пользователь
      Решает перейти на Premium: 4: Пользователь
```

---

## Полный user journey для клиента (Premium)

```mermaid
journey
    title User Journey: Premium Client
    section Регистрация
      Регистрируется с инвайт-кодом: 5: Пользователь
      Автоматически назначается тренер: 5: Система
      Проходит онбординг: 4: Пользователь
    section Ежедневное использование
      Открывает дашборд: 5: Пользователь
      Видит заметку от тренера: 5: Пользователь
      Вводит данные о питании: 4: Пользователь
      Использует OCR для сканирования: 5: Пользователь
      Использует базу продуктов: 5: Пользователь
      Сохраняет данные: 5: Пользователь
      Завершает день: 4: Пользователь
      Тренер получает уведомление: 5: Система
    section Коммуникация
      Открывает чат с тренером: 5: Пользователь
      Отправляет сообщение: 5: Пользователь
      Получает ответ в реальном времени: 5: Пользователь
    section Аналитика
      Открывает отчеты: 5: Пользователь
      Смотрит графики веса: 5: Пользователь
      Смотрит графики КБЖУ: 5: Пользователь
      Экспортирует данные: 4: Пользователь
    section Достижения
      Получает достижение: 5: Пользователь
      Видит уведомление: 5: Пользователь
      Публикует в соцсетях: 4: Пользователь
```

---

## Полный user journey для тренера

```mermaid
journey
    title User Journey: Coach
    section Вход
      Авторизуется: 5: Тренер
      Открывает кабинет: 5: Тренер
      Видит список клиентов: 5: Тренер
    section Приоритизация
      Видит Traffic Light System: 5: Тренер
      Фильтрует по статусу: 4: Тренер
      Выбирает клиента Red: 5: Тренер
    section Работа с клиентом
      Открывает дашборд клиента: 5: Тренер
      Просматривает данные: 4: Тренер
      Редактирует цели питания: 4: Тренер
      Сохраняет заметку: 5: Тренер
      Клиент получает уведомление: 5: Система
    section Коммуникация
      Открывает чат с клиентом: 5: Тренер
      Отправляет сообщение: 5: Тренер
      Получает ответ: 5: Тренер
    section Привлечение клиентов
      Создает инвайт-код: 4: Тренер
      Отправляет код клиенту: 4: Тренер
      Клиент регистрируется: 5: Система
      Автоматически назначается тренер: 5: Система
```

---

## Onboarding flow

```mermaid
flowchart TD
    Start([Новый пользователь]) --> Step1[Шаг 1: Биометрия]
    Step1 --> InputBio[Ввод пола, даты рождения, роста]
    InputBio --> ValidateBio{Валидация}
    ValidateBio -->|Ошибка| ShowError1[Показать ошибку]
    ShowError1 --> InputBio
    ValidateBio -->|Успех| Step2[Шаг 2: Активность]
    Step2 --> SelectActivity[Выбор уровня активности]
    SelectActivity --> Step3[Шаг 3: Цель]
    Step3 --> SelectGoal[Выбор цели: похудение/поддержание/набор]
    SelectGoal --> Calculate[Расчет BMR/TDEE]
    Calculate --> CreateTargets[Создание целей питания]
    CreateTargets --> SaveProfile[Сохранение профиля]
    SaveProfile --> Success[Редирект на /app/dashboard]
```

---

## Subscription lifecycle flow

```mermaid
stateDiagram-v2
    [*] --> Free: Регистрация
    Free --> Active: Активация подписки
    Active --> Expiring: За 3 дня до окончания
    Expiring --> Active: Продление подписки
    Expiring --> Expired: Истечение срока
    Active --> Cancelled: Отмена подписки
    Cancelled --> Active: Возобновление
    Expired --> Free: Деактивация
    Expired --> Active: Продление подписки
    Free --> [*]
    Active --> [*]
    Cancelled --> [*]
    Expired --> [*]
```

---

## Связанные документы

- [Functional_Specification.md](./Functional_Specification.md) - Функциональная спецификация
- [Business_Model.md](./Business_Model.md) - Бизнес-модель
- [Diagrams_Index.md](./Diagrams_Index.md) - Индекс всех диаграмм

---

**Последнее обновление:** Январь 2025  
**Версия документа:** 1.0

