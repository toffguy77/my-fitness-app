# Обзор продукта My Fitness App

**Версия документа:** 1.0  
**Дата создания:** Январь 2025  
**Статус:** Актуальная реализация v4.0+

---

## Описание продукта

**My Fitness App** — это Freemium SaaS платформа для управления питанием и отслеживания прогресса, предназначенная для клиентов фитнес-тренеров и нутрициологов. Платформа предоставляет удобный цифровой дневник питания с поддержкой работы с тренером, визуализацией данных и автоматической аналитикой.

### Ключевые особенности

- **Цифровой дневник питания** с отслеживанием КБЖУ (калории, белки, жиры, углеводы)
- **Freemium модель** с базовым функционалом для всех и расширенными возможностями для Premium подписчиков
- **Интеграция с тренером** для Premium клиентов (обратная связь, заметки, чат)
- **Визуализация прогресса** через графики, прогресс-бары и аналитику
- **Автоматические расчеты** целей питания на основе биометрических данных
- **OCR распознавание** этикеток продуктов для быстрого ввода данных
- **База продуктов** с автозаполнением КБЖУ
- **PWA поддержка** для использования как мобильное приложение
- **Система достижений** для мотивации пользователей

---

## Целевая аудитория

### Основные пользователи

1. **Клиенты тренеров и нутрициологов (Client)**
   - Люди, которые работают с персональным тренером или нутрициологом
   - Нуждаются в удобном инструменте для отслеживания питания
   - Хотят видеть свой прогресс и получать обратную связь от тренера
   - Могут быть как Free (базовый функционал), так и Premium (полный функционал с тренером)

2. **Тренеры и нутрициологи (Coach)**
   - Профессионалы, работающие с клиентами
   - Нуждаются в инструменте для мониторинга прогресса клиентов
   - Хотят давать обратную связь и управлять целями питания
   - Используют Traffic Light System для приоритизации работы с клиентами

3. **Супер-администраторы (Super Admin)**
   - Администраторы платформы
   - Управляют пользователями, ролями и подписками
   - Назначают тренеров клиентам
   - Контролируют работу всей системы

### Вторичные пользователи

- **Потенциальные клиенты** — пользователи, которые еще не зарегистрированы, но могут быть заинтересованы в использовании платформы

---

## Ключевые возможности

### Для клиентов (Client)

#### Базовый функционал (Free)
- ✅ Регистрация и авторизация
- ✅ Онбординг с расчетом целей питания (BMR/TDEE)
- ✅ Ввод данных о питании (КБЖУ) за день
- ✅ Множественные приемы пищи с детализацией
- ✅ Отслеживание веса тела
- ✅ Просмотр дашборда с сводкой за неделю
- ✅ Блокировка редактирования завершенных дней
- ✅ Валидация данных о питании

#### Premium функционал
- ✅ Работа с тренером (получение заметок и обратной связи)
- ✅ Чат с тренером в реальном времени (WebSocket)
- ✅ Доступ к отчетам и аналитике
- ✅ Графики веса и КБЖУ
- ✅ Экспорт данных (CSV, JSON, PDF)
- ✅ Фильтры и пагинация в отчетах
- ✅ Система достижений и бейджей
- ✅ OCR распознавание этикеток продуктов
- ✅ База продуктов с автозаполнением

### Для тренеров (Coach)

- ✅ Кабинет тренера с списком клиентов
- ✅ Traffic Light System v2 для приоритизации работы
- ✅ Просмотр дашборда клиента
- ✅ Редактирование целей питания клиента
- ✅ Сохранение заметок для клиента по датам
- ✅ Чат с клиентами в реальном времени
- ✅ Умная отправка уведомлений (проверка настроек клиента)
- ✅ Генерация инвайт-кодов для привлечения клиентов
- ✅ Статистика использования инвайт-кодов

### Для супер-администраторов (Super Admin)

- ✅ Управление пользователями
- ✅ Назначение и изменение ролей
- ✅ Управление подписками
- ✅ Назначение тренеров клиентам
- ✅ Просмотр всех данных системы

---

## История версий и эволюция

### Phase 1: MVP - Цифровой дневник питания (v1.0)
**Статус:** ✅ Реализовано

- Базовая авторизация и регистрация
- Ввод данных о питании (КБЖУ)
- Дашборд с сводкой за неделю
- Установка целей питания
- Отслеживание веса тела

### Phase 2: The Loop - Петля обратной связи (v2.0)
**Статус:** ✅ Реализовано

- Кабинет тренера
- Traffic Light System для приоритизации клиентов
- Система заметок тренера (coach_notes)
- Daily Check-in (завершение дня)
- Просмотр дашборда клиента тренером

### Phase 2.5: Freemium SaaS (v2.5)
**Статус:** ✅ Реализовано

- Модель подписок (Free/Premium)
- Роли пользователей (client, curator, super_admin)
- Paywall для Premium функций
- Управление подписками

### Phase 2.6: Enhanced Dashboard (v2.6)
**Статус:** ✅ Реализовано

- Улучшенный дашборд клиента
- Множественные приемы пищи
- Умное копирование приемов пищи
- Навигация по датам
- Улучшенный ввод питания

### Phase 3: Уведомления и валидация (v3.0)
**Статус:** ✅ Реализовано

- Система уведомлений (email через Resend)
- Валидация данных о питании (клиентская и серверная)
- Автоматическая деактивация истекших подписок
- Уведомления о истекающих подписках
- Настройки уведомлений (мгновенные/дайджест)

### Phase 3.1: Onboarding (v3.1)
**Статус:** ✅ Реализовано

- Мастер настройки (онбординг)
- Автоматический расчет BMR/TDEE
- Создание целей питания на основе биометрии
- Навигация по датам

### Phase 3.2: Feedback Loop (v3.2)
**Статус:** ✅ Реализовано

- Улучшенная петля обратной связи
- Daily Check-in с блокировкой редактирования
- Пересчет целей питания

### Phase 3.3: Валидация и уведомления (v3.3)
**Статус:** ✅ Реализовано

- Серверная валидация данных о питании
- Система уведомлений через Edge Functions
- Автоматическая деактивация подписок

### Phase 3.4: Reliability & Safety (v3.4)
**Статус:** ✅ Реализовано

- Subscription Lifecycle UI (баннеры для истекших подписок)
- Notification Preferences (настройки уведомлений)
- Coach Input Guardrails (валидация целей питания)

### Phase 4: UX Improvements & Data Visualization (v4.0)
**Статус:** ✅ Реализовано

- Toast уведомления (замена alert())
- Loading индикаторы (Spinner, SkeletonLoader)
- ProgressBar для визуализации прогресса
- Графики веса и КБЖУ (WeightChart, MacrosChart)
- Экспорт данных (CSV, JSON, PDF)
- Фильтры и пагинация в отчетах
- Оптимистичные обновления UI

### Phase 5: Коммуникация и база продуктов (v5.0)
**Статус:** ✅ Реализовано (95%)

- Чат с тренером в реальном времени (WebSocket)
- База продуктов с автозаполнением
- Интеграция с Open Food Facts API
- Пользовательские продукты
- История часто используемых продуктов

### Phase 6: PWA и инвайт-система (v6.0)
**Статус:** ✅ Реализовано (90%)

- Progressive Web App (PWA)
- Service Worker для offline режима
- Установка на домашний экран
- Инвайт-коды для тренеров
- Автоматическое назначение тренера при регистрации

### Phase 7: OCR и расширенная функциональность (v7.0)
**Статус:** ✅ Реализовано (85%)

- OCR распознавание этикеток продуктов
- Гибридный подход (Tesseract.js + OpenRouter API)
- Система достижений и бейджей
- Публикация прогресса в социальных сетях

---

## Текущий статус реализации

### Общий статус

**Версия:** v4.0+ (Phase 4-7 реализованы)  
**Дата последнего обновления:** Январь 2025

### Реализованные функции

✅ **Все основные функции из Roadmap Phase 1-7 реализованы**

- Phase 1-3: Полностью реализованы
- Phase 4: UX улучшения и визуализация данных (100%)
- Phase 5: Коммуникация и база продуктов (95%)
- Phase 6: PWA и инвайт-система (90%)
- Phase 7: OCR и достижения (85%)

### Опциональные функции (не реализованы)

⚠️ **Низкий приоритет, могут быть реализованы в будущем:**

- Экспорт PDF (Phase 4) - опционально
- Отправка файлов/изображений в чате (Phase 5)
- Избранные продукты ✅ (Phase 5)
- Push-уведомления (Phase 6)
- Публичные профили (Phase 7)
- Лидерборды ✅ (Phase 7)

---

## Технологический стек

### Frontend
- **Framework:** Next.js 16 (App Router)
- **React:** v19 с React Compiler
- **Styling:** Tailwind CSS v4
- **Icons:** Lucide React
- **Charts:** Recharts
- **Toast:** react-hot-toast
- **Export:** papaparse (CSV), jspdf (PDF)
- **OCR:** Tesseract.js, OpenRouter API

### Backend
- **BaaS:** Supabase (PostgreSQL, Auth, Realtime, Edge Functions)
- **Email:** Resend API
- **Database:** PostgreSQL с Row Level Security (RLS)

### Инфраструктура
- **Deployment:** Docker, Docker Compose
- **CI/CD:** (настраивается)
- **Testing:** Jest, Playwright, Testing Library

---

## Архитектура

### Тип приложения
- **Single Page Application (SPA)** на базе Next.js
- **Server-Side Rendering (SSR)** для начальной загрузки
- **Client-Side Rendering (CSR)** для интерактивности
- **Progressive Web App (PWA)** для мобильного использования

### Модель данных
- **База данных:** PostgreSQL (через Supabase)
- **Аутентификация:** Supabase Auth
- **Хранение файлов:** Supabase Storage (для будущего использования)
- **Real-time:** Supabase Realtime (WebSocket для чата)

### Безопасность
- **Row Level Security (RLS)** для защиты данных на уровне БД
- **Middleware** для защиты маршрутов
- **Валидация данных** на клиенте и сервере
- **HTTPS** для всех соединений

---

## Монетизация

### Freemium модель

**Free (базовый функционал):**
- Дневник питания
- Отслеживание веса
- Базовый дашборд
- Валидация данных

**Premium (расширенный функционал):**
- Работа с тренером
- Чат в реальном времени
- Отчеты и аналитика
- Графики прогресса
- Экспорт данных
- OCR распознавание
- Система достижений

### Подписки
- **Статусы:** free, active, cancelled, past_due
- **Уровни:** basic, premium
- **Автоматическая деактивация** истекших подписок
- **Уведомления** о истекающих подписках

---

## Метрики успеха

### Пользовательские метрики
- Количество активных пользователей
- Конверсия Free → Premium
- Retention rate (удержание пользователей)
- Частота использования (дни с данными)
- Среднее количество приемов пищи в день

### Бизнес-метрики
- MRR (Monthly Recurring Revenue)
- Churn rate (отток пользователей)
- LTV (Lifetime Value)
- CAC (Customer Acquisition Cost)

### Технические метрики
- Время загрузки страниц
- Производительность запросов к БД
- Доступность сервиса (uptime)
- Ошибки и их частота

---

## Будущее развитие

### Планируемые улучшения
- Расширенная аналитика для тренеров
- Интеграция с фитнес-трекерами
- Мобильные приложения (iOS/Android)
- Социальные функции (публичные профили ✅, лидерборды ✅)
- Расширенная система достижений

### Исследования
- AI-рекомендации по питанию
- Автоматическое планирование меню
- Интеграция с доставкой еды
- Геймификация для повышения вовлеченности

---

## Связанные документы

- [Business_Model.md](./Business_Model.md) - Бизнес-модель и монетизация
- [Product_Requirements.md](./Product_Requirements.md) - Требования к продукту
- [Functional_Specification.md](./Functional_Specification.md) - Функциональная спецификация
- [Technical_Architecture.md](./Technical_Architecture.md) - Техническая архитектура
- [Database_Schema.md](./Database_Schema.md) - Схема базы данных
- [Implementation_Guide.md](./Implementation_Guide.md) - Руководство по реализации

---

**Последнее обновление:** Январь 2025  
**Версия документа:** 1.0
