# E2E Tests

End-to-end —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ My Fitness App.

## üéØ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### 1. Authentication Flow (`auth.spec.ts`)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ landing page
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –≤—Ö–æ–¥–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º
- –†–µ–¥–∏—Ä–µ–∫—Ç—ã –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### 2. Onboarding Flow (`onboarding.spec.ts`)
- –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ –≤—Å–µ—Ö —à–∞–≥–æ–≤ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –±–∏–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –†–∞—Å—á–µ—Ç —Ü–µ–ª–µ–π –ø–∏—Ç–∞–Ω–∏—è
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

### 3. Nutrition Input Flow (`nutrition.spec.ts`)
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–µ–º–æ–≤ –ø–∏—â–∏
- –†–∞—Å—á–µ—Ç –∏—Ç–æ–≥–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ö–ë–ñ–£
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–Ω–µ–≤–Ω–æ–≥–æ –ª–æ–≥–∞
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ç–∏–ø–∞–º–∏ –¥–Ω–µ–π (—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞/–æ—Ç–¥—ã—Ö)

### 4. Dashboard Flow (`dashboard.spec.ts`)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
- –ù–µ–¥–µ–ª—å–Ω–∞—è —Å–≤–æ–¥–∫–∞
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–∏—Ç–∞–Ω–∏—è
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞—Ç—ã
- Daily Check-in

### 5. Coordinator Dashboard Flow (`coordinator.spec.ts`)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤
- –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ (Traffic Light)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤

### 6. Performance Tests (`performance.spec.ts`)
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü
- Web Vitals –º–µ—Ç—Ä–∏–∫–∏
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å API
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏

## üöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ E2E —Ç–µ—Å—Ç—ã
npm run test:e2e

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å UI —Ä–µ–∂–∏–º–æ–º
npm run test:e2e:ui

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ debug —Ä–µ–∂–∏–º–µ
npm run test:e2e:debug

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª
npx playwright test e2e/auth.spec.ts

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ
npx playwright test --project=chromium
```

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 20+
- –ó–∞–ø—É—â–µ–Ω–Ω—ã–π dev —Å–µ—Ä–≤–µ—Ä (`npm run dev`)
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (`.env.local`)

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `playwright.config.ts`:
- Base URL: `http://localhost:3069` (–∏–ª–∏ `PLAYWRIGHT_TEST_BASE_URL`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞ –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∞–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Chromium, Firefox, WebKit

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è CI/CD

–í CI/CD –æ–∫—Ä—É–∂–µ–Ω–∏–∏:
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±—Ä–∞—É–∑–µ—Ä—ã: `npx playwright install --with-deps`
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `CI=true` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –¢–µ—Å—Ç—ã –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —Å 2 retries

## üìä –û—Ç—á–µ—Ç—ã

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤:
- HTML –æ—Ç—á–µ—Ç: `npx playwright show-report`
- –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏: —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –°–∫—Ä–∏–Ω—à–æ—Ç—ã: —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

## üß™ –ú–æ–∫–∏ –∏ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–î–ª—è E2E —Ç–µ—Å—Ç–æ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å MSW (Mock Service Worker) –¥–ª—è –º–æ–∫–æ–≤ API
- –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ `create_test_users_v3.sql`

## üìù –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö E2E —Ç–µ—Å—Ç–æ–≤:
1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤ `e2e/` —Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º `.spec.ts`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `test.describe` –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `test.beforeEach` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
4. –°–ª–µ–¥—É–π—Ç–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤

–ü—Ä–∏–º–µ—Ä:
```typescript
import { test, expect } from '@playwright/test'

test.describe('New Feature', () => {
  test('should work correctly', async ({ page }) => {
    await page.goto('/new-feature')
    await expect(page.locator('text=Feature')).toBeVisible()
  })
})
```

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-01-XX

